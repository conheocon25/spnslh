<!DOCTYPE html>
<html lang="en">
	<head>
		<div metal:use-macro="mFront.xhtml/IncludeMETA"/>
		<div metal:use-macro="mFront.xhtml/IncludeCSS"/>
		<div metal:use-macro="mFront.xhtml/IncludeJS"/>
	</head>
	<body>
		<tal:block metal:use-macro="mFront.xhtml/Header"/>
		<div class="container-fluid" id="wraper">
			<div class="row">				
				<div class="col-md-8"><div id="CommandDetail" /></div>
				<div class="col-md-4">
					<div class="panel panel-primary">
						<div class="panel-heading"><i class="glyphicon glyphicon-cog"/> <B>ĐƠN HÀNG CHỜ XUẤT</B></div>
						<div class="panel-body">
							<div class="btn btn-info InvoiceReload" id="MessageTime" tal:attributes="timer ConfigTimer/getValue" />
							<div id="InvoiceQueue" />							
						</div>
					</div>
					<div class="panel panel-success">
						<div class="panel-heading"><i class="glyphicon glyphicon-cog"/> <B>ĐƠN HÀNG ĐÃ XUẤT</B></div>
						<div class="panel-body">
							<div id="InvoiceFinish" />
						</div>	
					</div>
				</div>
			</div>
		</div>
						
		<script type="text/javascript">
		/*<![CDATA[*/
			//Thủ tục đếm ngược
			var MAX 		= $("#MessageTime").attr('timer');
			var CountDown 	= $("#MessageTime").attr('timer');
			var myVar 		= setInterval(FMessageTime, 1000);
			    
			function FMessageTime(){
				CountDown = CountDown-1;
				$("#MessageTime").html("Sau <B>"+CountDown+"s</B> sẽ tự động cập nhật lại danh sách ...");
				if (CountDown<=0){
					CountDown = MAX;
					$("#InvoiceQueue").load("/ql-kho-hang/lenh-xuat/nap-hang-doi");
					$("#InvoiceFinish").load("/ql-kho-hang/lenh-xuat/nap-hoan-thanh");
				}
			}
			$("#InvoiceQueue").load("/ql-kho-hang/lenh-xuat/nap-hang-doi");
			$("#InvoiceFinish").load("/ql-kho-hang/lenh-xuat/nap-hoan-thanh");
			
			$(".InvoiceReload").click(function(){
				location.reload();
			});
			
		/*]]>*/
		</script>
	</body>
</html>